(this["webpackJsonpvk-mini-apps-empty"]=this["webpackJsonpvk-mini-apps-empty"]||[]).push([[0],{263:function(e,t,a){e.exports=a(447)},365:function(e,t){},367:function(e,t){},400:function(e,t){},401:function(e,t){},447:function(e,t,a){"use strict";a.r(t);a(264),a(290),a(292),a(293),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(304),a(305),a(306),a(307),a(308),a(309),a(310),a(311),a(312),a(313),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332);var n=a(0),c=a.n(n),r=a(55),l=a.n(r),o=a(42),u=a.n(o),i=a(2),s=(a(340),a(5)),m=a(192),f=a.n(m),b=a(31),d=a(65),j=a.n(d),O=a(61),p=a.n(O),E=a(193),g=a.n(E),h=a(194),v=a.n(h),y=a(211),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(n.useState)((function(){return localStorage.getItem(e)||t})),c=Object(i.a)(a,2),r=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,l]},C=a(195),S=a.n(C),x=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)(null),f=Object(i.a)(m,2),b=f[0],d=f[1],j=Object(n.useState)({}),O=Object(i.a)(j,2),p=O[0],E=O[1],g=k("token"),h=Object(i.a)(g,1)[0],v="https://35.238.182.107:8080/api",C=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(e),r(!0)}),[]),x=p.method,w=void 0===x?"GET":x,U=p.params,z=Object(y.a)(p,["method","params"]);return Object(n.useEffect)((function(){if(c){var t={"Content-Type":"application/json",Authorization:h?"Token ".concat(h):""},a=U?S.a.stringify(U):null,n=a?"".concat(v).concat(e,"?").concat(a):"".concat(v).concat(e);fetch(n,{method:w,mode:"cors",headers:t,body:"GET"!==w?JSON.stringify(z):null}).then((function(e){return e.json()})).then((function(e){r(!1),s(e)})).catch((function(e){r(!1),d(e)}))}}),[c,z,w,e,v,h,U]),[{isLoading:c,response:u,error:b},C]},w=a(122),U=a.n(w),z=a(196),P=a.n(z),I=Object(n.createContext)([{},function(){}]),L=Object(n.createContext)([{},function(e){}]),T=Object(n.createContext)([{},function(e){}]),F=function(e){var t=e.go,a=e.goView,r=e.type,l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)(""),O=Object(i.a)(d,2),E=O[0],h=O[1],y=Object(n.useState)(null),C=Object(i.a)(y,2),S=C[0],w=C[1],U=x("/users/".concat(r)),z=Object(i.a)(U,2),P=z[0],F=P.response,D=P.error,_=z[1],A=Object(n.useContext)(I),M=Object(i.a)(A,1)[0].vkUserId,q=Object(n.useState)(!1),R=Object(i.a)(q,2),V=R[0],K=R[1],W=Object(n.useContext)(L),G=Object(i.a)(W,2),B=G[0],J=G[1],N=k("token"),Y=Object(i.a)(N,2)[1],Z=Object(n.useContext)(T),H=Object(i.a)(Z,2)[1];Object(n.useEffect)((function(){if(B.isLoggedIn){var e=B.currentUser,t=e.name,a=e.phone,n=e.email,c=e.password;H(t&&a&&n&&c?function(e){return Object(b.a)({},e,{view:"balance",panel:"balance.home"})}:function(e){return Object(b.a)({},e,{view:"profile",panel:"profile.edit"})})}}),[B,H]),Object(n.useEffect)((function(){"login"!==r&&(u.length===E.length?u!==E&&w({status:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438",message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0432\u0432\u043e\u0434 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443."}):w(null))}),[u,E,r]),Object(n.useEffect)((function(){V&&(_({method:"POST",user:{id:+M,password:u}}),K(!1))}),[V,_,u,M]),Object(n.useEffect)((function(){F&&(!F.user&&F.error?w(F.error):Y(F.user.token),J((function(e){return Object(b.a)({},e,{isLoading:!1,isLoggedIn:!!F.user,currentUser:F.user||null})})))}),[F,J,t,a,Y]),Object(n.useEffect)((function(){D&&w(D)}),[D]);var $=function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,4),"password"===e.target.name?m(e.target.value):h(e.target.value)};return c.a.createElement(n.Fragment,null,c.a.createElement(j.a,null,"login"===r?"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement(s.n,{icon:"login"===r?c.a.createElement(g.a,null):c.a.createElement(v.a,null),header:"login"===r?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},c.a.createElement(s.d,null,S?c.a.createElement(s.f,{header:S.status,mode:"error"},S.message):null,c.a.createElement(s.e,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},c.a.createElement(s.i,{name:"password",type:"number",onChange:$,align:"center",value:u})),"login"!==r?c.a.createElement(s.e,{top:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},c.a.createElement(s.i,{type:"number",name:"confirmPassword",onChange:$,align:"center",value:E})):null,c.a.createElement(p.a,{size:"l",onClick:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:K(!0);case 1:case"end":return e.stop()}}))}},"login"===r?"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),c.a.createElement(s.c,null,c.a.createElement(p.a,{stretched:!0,mode:"tertiary",onClick:function(e){H((function(t){return Object(b.a)({},t,{panel:e.currentTarget.dataset.to})}))},"data-to":"login"===r?"authorization.register":"authorization.login"},"login"===r?"\u041d\u0435\u0442 \u043f\u0430\u0440\u043e\u043b\u044f?":"\u0415\u0441\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c?")))},D=a(86),_=a.n(D),A=a(87),M=a.n(A),q=a(197),R=a.n(q),V=function(e){var t=e.go,a=e.fetchedUser,r=Object(n.useState)(""),l=Object(i.a)(r,2),o=l[0],m=l[1],f=Object(n.useState)(""),d=Object(i.a)(f,2),j=d[0],O=d[1],p=Object(n.useState)(""),E=Object(i.a)(p,2),g=E[0],h=E[1],v=Object(n.useState)(""),y=Object(i.a)(v,2),k=y[0],C=y[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),U=w[0],z=w[1],P=x("/users/profile"),I=Object(i.a)(P,2),F=I[0].response,D=I[1],A=Object(n.useState)(!1),q=Object(i.a)(A,2),V=q[0],K=q[1],W=Object(n.useContext)(L),G=Object(i.a)(W,1)[0],B=Object(n.useContext)(T),J=Object(i.a)(B,2)[1],N=Object(s.r)();return Object(n.useEffect)((function(){u.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;switch(a){case"VKWebAppGetPersonalCardResult":m(n.email),O(n.phone)}}))}),[]),Object(n.useEffect)((function(){m(G.currentUser.email||""),h(G.currentUser.name||""),O(G.currentUser.phone||""),C(G.currentUser.password||"")}),[G]),Object(n.useEffect)((function(){V&&(D({method:"PUT",update:{email:o,phone:j,name:g,kktPassword:k}}),K(!1))}),[V,D,o,j,g,k]),Object(n.useEffect)((function(){if(F){var e=F.user;e.name&&e.phone&&e.email&&e.password&&J((function(e){return Object(b.a)({},e,{view:"balance",panel:"balance.home"})}))}}),[F,J]),c.a.createElement(n.Fragment,null,c.a.createElement(s.l,{left:c.a.createElement(s.m,{onClick:t,"data-to":"home"},N===s.h?c.a.createElement(_.a,null):c.a.createElement(M.a,null))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),a&&c.a.createElement(s.g,{title:a.id},c.a.createElement(s.b,{before:a.photo_200?c.a.createElement(R.a,{src:a.photo_200}):null,description:a.city&&a.city.title?a.city.title:""},"".concat(a.first_name," ").concat(a.last_name))),c.a.createElement(s.d,null,U&&c.a.createElement(s.f,{header:"\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d",mode:"default"},"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0438\u0434\u0442\u0438 \u043a \u0432\u0430\u043c \u0432 \u0441\u043c\u0441. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u043f\u043e\u043b\u0435. \u0415\u0441\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043f\u0440\u0438\u0448\u0435\u043b \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435."),c.a.createElement(s.i,{type:"text",top:"\u0418\u043c\u044f",name:"name",value:g,onChange:function(e){h(e.target.value)}}),c.a.createElement(s.e,{top:"E-mail \u0438 \u0422\u0435\u043b\u0435\u0444\u043e\u043d",bottom:"\u042d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0447\u0435\u0440\u0435\u0437 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435. \u041e\u043d\u0438 \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0424\u041d\u0421 \u0434\u043b\u044f \u0440\u0430\u0441\u0448\u0438\u0444\u0440\u043e\u0432\u043a\u0438 \u0447\u0435\u043a\u043e\u0432."},c.a.createElement(s.i,{type:"email",top:"e-mail",name:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail",value:o,onChange:function(e){m(e.target.value)}}),c.a.createElement(s.i,{type:"phone",top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",value:j,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",onChange:function(e){O(e.target.value)}}),c.a.createElement(s.a,{size:"xl",onClick:function(){u.a.send("VKWebAppGetPersonalCard",{type:["phone","email"]})}},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 VK")),c.a.createElement(s.e,{top:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0424\u041d\u0421"},c.a.createElement(s.i,{type:"number",top:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0424\u041d\u0421",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0424\u041d\u0421",name:"kktPassword",value:k,onChange:function(e){C(e.target.value)}}),c.a.createElement(s.a,{size:"xl",onClick:function(){z(!0)}},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c \u043e\u0442 \u0424\u041d\u0421")),c.a.createElement(s.a,{size:"xl",mode:"commerce",onClick:function(){K(!0)}},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")))},K=a(198),W=a(199),G=function(){function e(){Object(K.a)(this,e)}return Object(W.a)(e,null,[{key:"qr",value:function(e){var t,a,n,c,r;if(e){var l=e.match(/t=(\w{8}T\w+)&s=(\w+\.*\w+)&fn=(\w+)&i=(\w+)&fp=(\w+)/),o=Object(i.a)(l,6);t=o[1],a=o[2],n=o[3],c=o[4],r=o[5]}return{dt:t,sum:a,fn:n,i:c,fp:r}}},{key:"date",value:function(e){var t,a=new Date(e);switch(a.getMonth()+1){case 1:t="\u044f\u043d\u0432\u0430\u0440\u044f";break;case 2:t="\u0444\u0435\u0432\u0440\u0430\u043b\u044f";break;case 3:t="\u043c\u0430\u0440\u0442\u0430";break;case 4:t="\u0430\u043f\u0440\u0435\u043b\u044f";break;case 5:t="\u043c\u0430\u044f";break;case 6:t="\u0438\u044e\u043d\u044f";break;case 7:t="\u0438\u044e\u043b\u044f";break;case 8:t="\u0430\u0432\u0433\u0443\u0441\u0442\u0430";break;case 9:t="\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f";break;case 10:t="\u043e\u043a\u0442\u044f\u0431\u0440\u044f";break;case 11:t="\u043d\u043e\u044f\u0431\u0440\u044f";break;case 12:t="\u0434\u0435\u043a\u0430\u0431\u0440\u044f"}return"".concat(a.getDate()," ").concat(t," ").concat(a.getFullYear())}},{key:"sum",value:function(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e/100)}},{key:"totalReceiptSum",value:function(e){if(0===e.length)return 0;return e.map((function(e){return e.totalSum})).reduce((function(e,t){return e+t}))}},{key:"totalSum",value:function(e,t){if(0===e.length)return 0;var a=function(e,t){return e+t},n=e.map((function(e){return e.items.map((function(e){return t?e.income?e.sum:0:e.income?0:e.sum})).reduce(a)})).reduce(a);return t?n:-1*n}}]),e}(),B=function(e){var t=e.sum,a=e.fs,n=t>=0?{color:"#28a745",fontSize:a}:{color:"#dc3545",fontSize:a};return c.a.createElement("span",{style:n},G.sum(t))},J=a(205),N=a.n(J),Y=a(206),Z=a.n(Y),H=a(200),$=a.n(H),Q=a(201),X=a.n(Q),ee=a(202),te=a.n(ee),ae=Object(n.createContext)([{},function(e){}]),ne=a(212),ce=a(449),re=a(450),le=a(451),oe=a(203),ue=a.n(oe),ie=a(204),se=a.n(ie),me=function(e){var t=e.setDateFromCalendar,a=Object(n.useState)(new Date),r=Object(i.a)(a,2),l=r[0],o=r[1];Object(n.useEffect)((function(){t(l)}),[l,t]);return c.a.createElement(s.g,null,c.a.createElement(s.j,null,c.a.createElement(s.b,{before:c.a.createElement(s.a,{onClick:function(){o(Object(ce.a)(l,1))},mode:"secondary"},c.a.createElement(ue.a,null)),asideContent:c.a.createElement(s.a,{onClick:function(){o(Object(ne.a)(l,1))},mode:"secondary"},c.a.createElement(se.a,null)),style:{textAlign:"center",fontWeight:"bold"}},Object(re.a)(l,"LLLL yyyy",{locale:le.a}).toLocaleUpperCase())))},fe=void 0,be=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(new Date),o=Object(i.a)(l,2),u=o[0],m=o[1],f=Object(n.useState)([]),d=Object(i.a)(f,2),O=d[0],E=d[1],g=x("/day"),h=Object(i.a)(g,2),v=h[0].response,y=h[1],k=Object(n.useContext)(T),C=Object(i.a)(k,2)[1],S=Object(n.useContext)(ae),w=Object(i.a)(S,2)[1],U=Object(n.useCallback)((function(e){m(e),r(!0)}),[]);return Object(n.useEffect)((function(){a&&(y({params:{date:Object(re.a)(u,"yyyy-MM-dd")}}),r(!1))}),[a,r,y,w,u]),Object(n.useEffect)((function(){v&&E(v)}),[v,w]),c.a.createElement(n.Fragment,null,c.a.createElement(j.a,null,"Balance"),c.a.createElement(s.n,{icon:c.a.createElement($.a,null),header:c.a.createElement(B,{sum:G.totalReceiptSum(O),fs:"2em"}),action:c.a.createElement(p.a,{size:"l",onClick:function(){C((function(e){return Object(b.a)({},e,{panel:"balance.add"})}))},"data-to":"addnote"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0445\u043e\u0434 / \u0440\u0430\u0441\u0445\u043e\u0434")},"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0434\u043e\u0445\u043e\u0434\u044b/\u0440\u0430\u0441\u0445\u043e\u0434\u044b"),c.a.createElement(s.p,null),c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:"1em"}},c.a.createElement("div",{style:{flex:"0 1 50%",display:"flex",justifyContent:"flex-end"}},c.a.createElement("div",{style:{display:"flex",flexDirection:"column",paddingRight:"10px"}},c.a.createElement("span",{style:{color:"#6F6F6F",fontSize:"0.7em",textAlign:"end"}},"\u0414\u043e\u0445\u043e\u0434\u044b"),c.a.createElement(B,{sum:G.totalSum(O,!0),fs:"1.4em"})),c.a.createElement(X.a,{width:16,height:40,fill:"#28a745"})),c.a.createElement("div",{style:{flex:"0 1 50%",display:"flex",justifyContent:"flex-start"}},c.a.createElement(te.a,{width:16,height:40,fill:"#dc3545"}),c.a.createElement("div",{style:{display:"flex",flexDirection:"column",paddingLeft:"10px"}},c.a.createElement("span",{style:{color:"#6F6F6F",fontSize:"0.7em"}},"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"),c.a.createElement(B,{sum:G.totalSum(O,!1),fs:"1.4em"})))),c.a.createElement(N.a,{title:"\u0427\u0435\u043a\u0438"},c.a.createElement(s.j,null,c.a.createElement(me,{setDateFromCalendar:U}),O.map((function(e,t){return c.a.createElement(Z.a,{key:t,expandable:!0,onClick:function(e){return fe.setActiveModal(e.currentTarget.dataset.to)},"data-to":e._id,indicator:c.a.createElement(B,{sum:e.totalSum})},G.date(e.dateTime))})))))},de=a(209),je=a.n(de),Oe=a(77),pe=a.n(Oe),Ee=a(123),ge=a.n(Ee),he=a(210),ve=a.n(he),ye=a(207),ke=a.n(ye),Ce=a(208),Se=a.n(Ce),xe=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)((function(){var e=new Date,t=e.getMonth()+1>9?e.getMonth()+1:"0".concat(e.getMonth()+1),a=e.getDate()>9?e.getDate():"0".concat(e.getDate());return"".concat(e.getFullYear(),"-").concat(t,"-").concat(a)})),o=Object(i.a)(l,2),u=o[0],m=o[1],f=Object(n.useState)(1),d=Object(i.a)(f,2),O=d[0],E=d[1],g=Object(n.useState)(""),h=Object(i.a)(g,2),v=h[0],y=h[1],k=Object(n.useState)(!1),C=Object(i.a)(k,2),S=C[0],w=C[1],U=Object(n.useContext)(T),z=Object(i.a)(U,2)[1],P=x("/day"),I=Object(i.a)(P,2),L=I[0].response,F=I[1],D=Object(n.useState)(!1),A=Object(i.a)(D,2),q=A[0],R=A[1],V=Object(s.r)();return Object(n.useEffect)((function(){q&&(F({method:"POST",date:u,items:[{name:a,quantity:O,price:100*v,sum:100*v*O,income:S,modifiers:[],properties:[]}]}),r(""),E(1),w(!1),y(""),R(!1))}),[q,R,u,F,S,a,v,O]),Object(n.useEffect)((function(){L&&console.log(L)}),[L]),c.a.createElement(n.Fragment,null,c.a.createElement(j.a,{left:c.a.createElement(ge.a,{key:"back",onClick:function(){z((function(e){return Object(b.a)({},e,{panel:"balance.home"})}))},"data-to":"balance"},V===s.h?c.a.createElement(_.a,null):c.a.createElement(M.a,null))},c.a.createElement(Se.a,{before:c.a.createElement(ge.a,{key:"qr"},c.a.createElement(ke.a,null))},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438")),c.a.createElement(je.a,null,c.a.createElement(pe.a,{type:"date",top:"\u0414\u0430\u0442\u0430",name:"date",value:u,onChange:function(e){m(e.currentTarget.value)}}),c.a.createElement(pe.a,{type:"text",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",value:a,onChange:function(e){r(e.currentTarget.value)}}),c.a.createElement(pe.a,{type:"number",top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",name:"quantity",value:O,onChange:function(e){E(e.currentTarget.value)}}),c.a.createElement(pe.a,{type:"number",top:"\u0426\u0435\u043d\u0430",name:"price",value:v,onChange:function(e){y(e.currentTarget.value)}}),c.a.createElement(ve.a,{name:"income",checked:S,onChange:function(e){w(e.currentTarget.checked)}},"\u0414\u043e\u0445\u043e\u0434"),c.a.createElement(p.a,{size:"xl",disabled:!u||!a||!O||!v,mode:S?"commerce":"destructive",onClick:function(){R(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c ",S?"\u0434\u043e\u0445\u043e\u0434":"\u0440\u0430\u0441\u0445\u043e\u0434")))},we=function(){var e=Object(n.useContext)(T),t=Object(i.a)(e,1)[0];return c.a.createElement(s.o,{activeView:t.view},c.a.createElement(s.q,{id:"authorization",activePanel:t.panel},c.a.createElement(s.k,{id:"authorization.login"},c.a.createElement(F,{type:"login"})),c.a.createElement(s.k,{id:"authorization.register"},c.a.createElement(F,{type:"register"}))),c.a.createElement(s.q,{id:"profile",activePanel:t.panel},c.a.createElement(s.k,{id:"profile.edit"},c.a.createElement(V,null))),c.a.createElement(s.q,{id:"balance",activePanel:t.panel},c.a.createElement(s.k,{id:"balance.home"},c.a.createElement(be,null)),c.a.createElement(s.k,{id:"balance.add"},c.a.createElement(xe,null))))},Ue=function(e){var t=e.children;return Object(n.useEffect)((function(){u.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}}))}),[]),t},ze=function(e){var t=e.children,a=x("/users/profile"),c=Object(i.a)(a,2),r=c[0].response,l=c[1],o=Object(n.useContext)(L),u=Object(i.a)(o,2)[1],s=k("token"),m=Object(i.a)(s,1)[0];return Object(n.useEffect)((function(){m?(l(),u((function(e){return Object(b.a)({},e,{isLoading:!0})}))):u((function(e){return Object(b.a)({},e,{isLoggedIn:!1})}))}),[l,u,m]),Object(n.useEffect)((function(){r&&u((function(e){return Object(b.a)({},e,{isLoading:!1,isLoggedIn:!!r.user,currentUser:r.user||null})}))}),[r,u]),t};u.a.send("VKWebAppInit"),l.a.render(c.a.createElement(Ue,null,c.a.createElement((function(e){var t=e.children,a=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),l=Object(i.a)(r,2),o=l[0],u=l[1],s=Object(n.useState)(null),m=Object(i.a)(s,2),f=m[0],b=m[1],d=Object(n.useState)(!1),j=Object(i.a)(d,2),O=j[0],p=j[1];return Object(n.useEffect)((function(){if(o){var e=U.a.parse(a);if(e){b(e.vk_user_id);var t={};Object.keys(e).sort().forEach((function(a){"vk_"===a.slice(0,3)&&(t[a]=e[a])}));var n=U.a.stringify(t),c=P.a.createHmac("sha256","Zs6DYRE8Z2mZ44LfciKW").update(n).digest().toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=$/,"");p(c===e.sign)}}}),[o,a]),[{vkUserId:f,matchUrlParams:O},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(e),u(!0)}]}(),r=Object(i.a)(a,2),l=r[0],o=l.vkUserId,u=l.matchUrlParams,s=r[1],m=Object(n.useState)({vkUserId:null,matchUrlParams:!1}),f=Object(i.a)(m,2),b=f[0],d=f[1];return Object(n.useEffect)((function(){s(window.location.search.slice(1))}),[s]),Object(n.useEffect)((function(){o&&d({vkUserId:o,matchUrlParams:u})}),[o,u]),c.a.createElement(I.Provider,{value:[b,d]},t)}),null,c.a.createElement((function(e){var t=e.children,a=Object(n.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),r=Object(i.a)(a,2),l=r[0],o=r[1];return c.a.createElement(L.Provider,{value:[l,o]},t)}),null,c.a.createElement((function(e){var t=e.children,a=Object(n.useState)({view:"authorization",panel:"authorization.register"}),r=Object(i.a)(a,2),l=r[0],o=r[1];return c.a.createElement(T.Provider,{value:[l,o]},t)}),null,c.a.createElement(ze,null,c.a.createElement(we,null)))))),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.aea7dc4e.chunk.js.map